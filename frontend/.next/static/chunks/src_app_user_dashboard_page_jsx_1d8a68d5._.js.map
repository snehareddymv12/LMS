{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SnehaReddy/OneDrive%20-%20ZapCom%20Solutions%20Pvt.%20ltd/Desktop/LMS/frontend/src/app/user/dashboard/page.jsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { jwtDecode } from 'jwt-decode';\nimport axios from 'axios';\n\nconst UserDashboard = () => {\n  const router = useRouter();\n  const [courses, setCourses] = useState([]);\n  const [error, setError] = useState('');\n  const [completed, setCompleted] = useState({});\n\n  const token = typeof window !== 'undefined' ? localStorage.getItem('token') : '';\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const token = localStorage.getItem('token');\n    if (!token) {\n      router.push('/login');\n      return;\n    }\n\n    try {\n      const decoded = jwtDecode(token);\n      if (decoded.role !== 'user') {\n        router.push('/login');\n        return;\n      }\n\n      axios\n        .get('http://localhost:4000/api/course/assigned', {\n          headers: { Authorization: `Bearer ${token}` },\n        })\n        .then((res) => setCourses(res.data.courses))\n        .catch((err) => {\n          console.error('Error loading courses', err);\n          setError('❌ Failed to load courses');\n        });\n\n      const stored = JSON.parse(localStorage.getItem('completedCourses') || '{}');\n      setCompleted(stored);\n    } catch (err) {\n      console.error('Invalid token:', err);\n      router.push('/login');\n    }\n  }, [router]);\n\n  const toggleComplete = (courseId) => {\n    const updated = { ...completed, [courseId]: !completed[courseId] };\n    setCompleted(updated);\n    localStorage.setItem('completedCourses', JSON.stringify(updated));\n  };\n\n  return (\n    <div className=\"p-6 min-h-screen bg-gray-100\">\n      <h1 className=\"text-3xl font-bold mb-6 text-blue-800\">🎓 Welcome Learner</h1>\n\n      {error && <p className=\"text-red-600 mb-4\">{error}</p>}\n\n      {courses.length === 0 ? (\n        <p className=\"text-gray-600\">No assigned courses yet.</p>\n      ) : (\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {courses.map((course) => (\n            <div\n              key={course._id}\n              className={`bg-white p-5 rounded-xl shadow border ${\n                completed[course._id] ? 'border-green-500' : 'border-gray-300'\n              }`}\n            >\n              <div className=\"flex justify-between items-center mb-2\">\n                <h3 className=\"text-xl font-semibold text-blue-700\">{course.title}</h3>\n                <label className=\"flex items-center text-sm\">\n                  <input\n                    type=\"checkbox\"\n                    checked={completed[course._id] || false}\n                    onChange={() => toggleComplete(course._id)}\n                    className=\"mr-2\"\n                  />\n                  Done\n                </label>\n              </div>\n\n              <p className=\"text-sm text-gray-600 mb-2\">{course.description}</p>\n\n              {course.uploadedBy?.name && (\n                <p className=\"text-xs text-gray-500 mb-2\">\n                  Instructor: {course.uploadedBy.name}\n                </p>\n              )}\n\n              <div className=\"relative pt-[56.25%]\">\n                {course.videoUrl.includes('youtube.com/embed') ? (\n                  <iframe\n                    src={course.videoUrl}\n                    title={course.title}\n                    className=\"absolute top-0 left-0 w-full h-full rounded\"\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                    allowFullScreen\n                  />\n                ) : (\n                  <video\n                    src={course.videoUrl}\n                    controls\n                    className=\"absolute top-0 left-0 w-full h-full rounded bg-black\"\n                  />\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UserDashboard;\n"],"names":[],"mappings":"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","debugId":null}}]
}